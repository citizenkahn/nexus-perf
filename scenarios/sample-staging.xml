<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright (c) 2007-2013 Sonatype, Inc. All rights reserved.

    This program and the accompanying materials are made available under the terms of the Eclipse Public License Version 1.0,
    which accompanies this distribution and is available at http://www.eclipse.org/legal/epl-v10.html.

-->
<!--
    request types
    - large number of clients perform download requests against public group
    - few clients stage artifacts
    this usage pattern is common to large forges like oss.sonatype.org
    and triggers cpu-expensive recalculation of security configuration
    after each staging repository created or dropped
-->
<scenario>
    <name>sample-staging</name>
    <duration>15 MINUTES</duration>
    <swarms>
        <swarm>
            <name>download</name>
            <numberOfClients>500</numberOfClients>
            <rate>5/SECOND</rate>
            <operation>
                <class>com.sonatype.nexus.perftest.maven.DownloadOperation</class>
                <repo>public</repo>
                <paths>
                  <class>com.sonatype.nexus.perftest.maven.HttpdLogParser</class>
                  <logfile>data/maven-3.1-build-artifact-access.log.gz</logfile>
                </paths>
            </operation>
        </swarm>
        <swarm>
            <name>staging</name>
            <numberOfClients>10</numberOfClients>
            <rate>2/MINUTE</rate>
            <operation>
                <class>com.sonatype.nexus.perftest.maven.StagingOperation</class>
                <pomTemplate>pom.xml</pomTemplate>
            </operation>
        </swarm>
    </swarms>
</scenario>
